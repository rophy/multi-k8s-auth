apiVersion: v1
kind: ConfigMap
metadata:
  name: multi-k8s-auth-config
  namespace: multi-k8s-auth
data:
  clusters.yaml: |
    clusters:
      # Local cluster (cluster-a)
      cluster-a:
        issuer: "https://kubernetes.default.svc.cluster.local"
        ca_cert: "/var/run/secrets/kubernetes.io/serviceaccount/ca.crt"
        token_path: "/var/run/secrets/kubernetes.io/serviceaccount/token"

      # Remote cluster (cluster-b)
      cluster-b:
        issuer: {{ .Values.cluster_b.issuer | quote }}
        api_server: {{ .Values.cluster_b.api_server | quote }}
        ca_cert: "/etc/multi-k8s-auth/certs/cluster-b-ca.crt"
        token_path: "/etc/multi-k8s-auth/certs/cluster-b-token"
        renewal:
          enabled: true
          service_account: "multi-k8s-auth-reader"
          namespace: "multi-k8s-auth"
          interval: "30m"
          token_duration: "1h"

