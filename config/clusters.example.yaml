# Authorized clients whitelist (optional, omit to allow all callers)
# Format: {cluster}/{namespace}/{serviceaccount}
# Supports "*" wildcard in any segment
# If set, callers must send their own SA token as Bearer in Authorization header
authorized_clients:
  - "cluster-a/kube-federated-auth/kube-auth-proxy"
  - "cluster-a/kube-federated-auth/test-client"

# Global renewal settings (optional, uses defaults if not specified)
renewal:
  interval: "1h"          # How often to check for renewal (default: 1h)
  token_duration: "168h"  # Requested token TTL (default: 168h / 7 days)
  renew_before: "48h"     # Renew if token expires within this duration (default: 48h / 2 days)

clusters:
  # EKS cluster (public OIDC endpoint)
  eks-prod:
    issuer: "https://oidc.eks.us-west-2.amazonaws.com/id/EXAMPLED539D4633E53DE1B71EXAMPLE"

  # GKE cluster (public OIDC endpoint)
  gke-prod:
    issuer: "https://container.googleapis.com/v1/projects/my-project/locations/us-central1/clusters/my-cluster"

  # Self-hosted cluster with private CA
  on-prem:
    issuer: "https://kubernetes.internal.corp"
    ca_cert: "/etc/kube-federated-auth/certs/on-prem-ca.crt"

  # Remote cluster - auto-renewed because api_server is set
  remote-cluster:
    issuer: "https://kubernetes.default.svc.cluster.local"
    api_server: "https://192.168.1.100:6443"
    ca_cert: "/etc/kube-federated-auth/certs/remote-ca.crt"
    token_path: "/etc/kube-federated-auth/certs/remote-token"
